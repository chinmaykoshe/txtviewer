<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text File Viewer</title>
<style>
  body { font-family: Arial, sans-serif; display: flex; flex-direction: column; margin: 0; }
  header { padding: 10px 20px; background: #1f4e78; color: white; display: flex; justify-content: space-between; align-items: center; }
  button { cursor: pointer; padding: 5px 10px; border: none; border-radius: 5px; }
  main { display: flex; flex: 1; height: calc(100vh - 50px); }
  .sidebar { width: 250px; background: #f0f0f0; padding: 10px; overflow-y: auto; }
  .sidebar button { width: 100%; margin-bottom: 5px; background: #007bff; color: white; }
  .sidebar button:hover { background: #0056b3; }
  .content { flex: 1; padding: 20px; overflow-y: auto; white-space: pre-wrap; font-family: monospace; }
  #backBtn { display: none; }
</style>
</head>
<body>

<header>
  <h1>Text File Viewer</h1>
  <button id="backBtn" onclick="showList()">Back</button>
</header>

<main>
  <div class="sidebar" id="fileList">Loading files...</div>
  <div class="content" id="content"></div>
</main>

<script>
const fileListDiv = document.getElementById('fileList');
const contentDiv = document.getElementById('content');
const backBtn = document.getElementById('backBtn');

// Fetch all files
fetch('/files')
  .then(res => res.json())
  .then(files => {
    if (!files.length) fileListDiv.textContent = 'No text files found';
    else {
      fileListDiv.innerHTML = '';
      files.forEach(f => {
        const btn = document.createElement('button');
        btn.textContent = f;
        btn.onclick = () => showFile(f);
        fileListDiv.appendChild(btn);
      });
    }
  });

function showFile(fileName) {
  fetch('/file/' + fileName)
    .then(res => res.text())
    .then(data => {
      contentDiv.textContent = data;
      fileListDiv.style.display = 'none';
      backBtn.style.display = 'inline-block';
    });
}

function showList() {
  contentDiv.textContent = '';
  backBtn.style.display = 'none';
  fileListDiv.style.display = 'block';
}
</script>

</body>
</html>
